# ğŸŒŠ Splash - Web Terminal

A modern web-based terminal interface built with **TypeScript** that provides full shell access through your browser. Built with Express, Socket.io, xterm.js, and node-pty, Splash allows you to run any terminal command including the Claude CLI directly from your web browser.

![License](https://img.shields.io/badge/license-ISC-blue.svg)
![Node](https://img.shields.io/badge/node-%3E%3D14.0.0-brightgreen.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue.svg)
![Rspack](https://img.shields.io/badge/Rspack-1.1-orange.svg)

## âœ¨ Features

- ğŸ–¥ï¸ **Full Shell Access** - Run any terminal command including bash, zsh, and Claude CLI
- ğŸ”„ **Real-time Communication** - Socket.io provides instant bidirectional data flow
- ğŸ¨ **Modern UI** - Clean, responsive interface with a beautiful dark theme
- ğŸ“ **Auto-resize** - Terminal automatically adapts to your browser window size
- ğŸ”— **Clickable Links** - URLs in terminal output are automatically clickable
- ğŸ¯ **True Terminal Emulation** - Full VT100/xterm compatibility with colors and cursor control
- âš¡ **Fast & Lightweight** - Rspack for blazing-fast builds
- ğŸ”’ **Type Safety** - Full TypeScript support for both frontend and backend

## ğŸ—ï¸ Architecture

```
Browser (xterm.js) â†â†’ Socket.io â†â†’ Express Server â†â†’ node-pty â†â†’ Shell (bash/zsh)
```

**Tech Stack:**

- **Backend**: TypeScript + Express + Socket.io + node-pty
- **Frontend**: TypeScript + xterm.js (bundled with Rspack)
- **Build Tools**: Rspack (frontend bundling), tsx (backend dev), tsc (backend production)
- **Package Manager**: Yarn

## ğŸ“ Project Structure

```
splash/
â”œâ”€â”€ src/                    # Backend TypeScript source
â”‚   â””â”€â”€ server.ts          # Express server with Socket.io
â”œâ”€â”€ client/                 # Frontend TypeScript source
â”‚   â”œâ”€â”€ client.ts          # Main client logic
â”‚   â””â”€â”€ types.ts           # Shared TypeScript types
â”œâ”€â”€ public/                 # Static assets
â”‚   â”œâ”€â”€ index.html         # HTML page
â”‚   â”œâ”€â”€ styles.css         # Styling
â”‚   â””â”€â”€ bundle.js          # Generated by Rspack (gitignored)
â”œâ”€â”€ dist/                   # Compiled backend (gitignored)
â”œâ”€â”€ tsconfig.json          # Backend TypeScript config
â”œâ”€â”€ tsconfig.client.json   # Frontend TypeScript config
â”œâ”€â”€ rspack.config.js       # Rspack bundler config
â”œâ”€â”€ package.json           # Dependencies and scripts
â””â”€â”€ yarn.lock              # Yarn lockfile
```

## ğŸ“‹ Prerequisites

- **Node.js** (v14 or higher)
- **Yarn** (v1.22+ or v4+)
- A Unix-like shell (**bash** or **zsh**) - pre-installed on macOS/Linux
- **Claude CLI** (optional) - Install if you want to use Claude from the terminal

## ğŸš€ Installation

1. **Clone or navigate to the repository**:

   ```bash
   cd /path/to/splash
   ```

2. **Install dependencies with Yarn**:

   ```bash
   yarn install
   ```

3. **Install Claude CLI** (optional):

   ```bash
   # Follow instructions at: https://claude.ai/cli
   # or use your preferred installation method
   ```

## ğŸ® Usage

### Development Mode

Start both the frontend bundler and backend server in watch mode:

```bash
yarn dev
```

This runs:

- Frontend: Rspack in watch mode (auto-rebuilds on changes)
- Backend: tsx in watch mode (auto-restarts on changes)

Then open your browser to `http://localhost:3000`

### Production Build

Build both frontend and backend for production:

```bash
yarn build
```

This creates:

- `public/bundle.js` - Optimized frontend bundle
- `dist/server.js` - Compiled backend server

### Production Run

Start the production server:

```bash
yarn start
```

You should see:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   Web Terminal Server Running                 â•‘
â•‘   Open: http://localhost:3000                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Available Scripts

```bash
yarn dev              # Development mode (both frontend and backend)
yarn dev:client       # Frontend only (Rspack watch mode)
yarn dev:server       # Backend only (tsx watch mode)
yarn build            # Build both frontend and backend for production
yarn build:client     # Build frontend only
yarn build:server     # Build backend only
yarn start            # Run production server
yarn clean            # Clean build artifacts
```

### Using Claude CLI

Once the terminal is open, you can use Claude CLI just like in a regular terminal:

```bash
claude --help
claude "What's the weather like today?"
# or any other claude commands
```

### Keyboard Shortcuts

- **Ctrl+C** - Interrupt current command
- **Ctrl+D** - Exit current shell/process
- **Ctrl+L** - Clear screen
- All standard terminal keyboard shortcuts work!

## ğŸ”§ Configuration

### Change Port

Set the `PORT` environment variable:

```bash
PORT=8080 yarn dev
# or for production
PORT=8080 yarn start
```

### Change Shell

The server automatically detects your default shell. To use a specific shell, modify `src/server.ts`:

```typescript
const shell = "/bin/zsh"; // or '/bin/bash', etc.
```

### Customize Terminal Theme

Edit `client/client.ts` to modify the terminal color scheme:

```typescript
const terminalTheme: TerminalTheme = {
  background: "#000000",
  foreground: "#f0f0f0",
  cursor: "#4a9eff",
  // ... customize colors
};
```

## ğŸ› ï¸ Development

### TypeScript Configuration

- **Backend** (`tsconfig.json`): CommonJS modules, ES2022 target
- **Frontend** (`tsconfig.client.json`): ESNext modules, ES2020 target, DOM types

### Hot Reload

In development mode (`yarn dev`), both frontend and backend will automatically reload on file changes:

- **Frontend**: Rspack rebuilds and you refresh the browser
- **Backend**: tsx automatically restarts the server

### Type Checking

TypeScript provides full type safety. Your IDE will show type errors as you code. To manually check types:

```bash
# Check backend types
yarn tsc --noEmit

# Check frontend types
yarn tsc --project tsconfig.client.json --noEmit
```

## ğŸ“¦ Dependencies

**Production Dependencies:**

- `express` - Web server framework
- `socket.io` - Real-time bidirectional communication
- `node-pty` - Pseudo terminal for spawning shells

**Development Dependencies:**

- `typescript` - TypeScript compiler
- `@rspack/core` & `@rspack/cli` - Fast Rust-based bundler
- `tsx` - TypeScript execution and watch mode
- `xterm` - Terminal emulator
- `xterm-addon-fit` - Auto-resize addon
- `xterm-addon-web-links` - Clickable URLs addon
- `socket.io-client` - Socket.io client library
- `concurrently` - Run multiple commands simultaneously
- Type definitions: `@types/node`, `@types/express`

## ğŸ”’ Security Considerations

âš ï¸ **Important**: This implementation provides full shell access to anyone who can connect to the server.

**For production use, you should add:**

- Authentication (username/password, OAuth, etc.)
- Authorization (user permissions, command restrictions)
- HTTPS/TLS encryption
- Rate limiting
- Input sanitization
- Firewall rules
- User session management

**This current implementation is intended for:**

- Local development
- Trusted networks
- Personal use
- Learning purposes

## ğŸ› Troubleshooting

### Port Already in Use

```bash
# Kill process using port 3000
lsof -ti:3000 | xargs kill -9
# Or use a different port
PORT=8080 yarn dev
```

### node-pty Installation Issues

```bash
# On macOS, you may need Xcode command line tools
xcode-select --install

# On Linux, you may need build essentials
sudo apt-get install build-essential
```

### Yarn Installation

```bash
# Install Yarn globally via npm
npm install -g yarn

# Or via Corepack (Node.js 16+)
corepack enable
```

### TypeScript Errors

```bash
# Clean build artifacts and rebuild
yarn clean
yarn build

# Check for type errors
yarn tsc --noEmit
```

### Rspack Build Errors

```bash
# Clear node_modules and reinstall
rm -rf node_modules yarn.lock
yarn install

# Rebuild
yarn build:client
```

### Terminal Not Displaying Correctly

- Try a different browser (Chrome, Firefox, Safari recommended)
- Clear browser cache
- Check browser console for errors
- Ensure JavaScript is enabled
- Check that `bundle.js` was built correctly

## ğŸš€ Performance

Rspack provides significantly faster build times compared to Webpack:

- **Development builds**: ~100ms (with caching)
- **Production builds**: ~500ms
- **Hot reload**: Nearly instant

## ğŸ¤ Contributing

Contributions are welcome! Feel free to:

- Report bugs
- Suggest features
- Submit pull requests
- Improve documentation

## ğŸ“ License

ISC License - feel free to use this project for any purpose.

## ğŸ™ Acknowledgments

- [xterm.js](https://xtermjs.org/) - Amazing terminal emulator
- [Socket.io](https://socket.io/) - Real-time communication
- [node-pty](https://github.com/microsoft/node-pty) - PTY bindings for Node.js
- [Express](https://expressjs.com/) - Web framework
- [Rspack](https://www.rspack.dev/) - Fast Rust-based bundler
- [TypeScript](https://www.typescriptlang.org/) - Typed JavaScript
- Inspired by [xtermjs-socketio](https://github.com/jpcweb/xtermjs-socketio)

## ğŸ“§ Support

For issues, questions, or suggestions, please open an issue on the repository.

---

**Made with â¤ï¸ and TypeScript for terminal enthusiasts**
